<style>
    #revMode {
        margin-top: 10vh;
    }

    center {
        margin-bottom: 5rem;
    }
</style>
<div id="revMode">
    <center>
        {{if (ne .HiIdx.MatchCound 0)}}
        <p>{{.RD.Title}}</p>
        <div>
            <div>

                <button class="btn" onclick="readerWrapper.classList.toggle('hidden')">
                    افتح القارئ
                </button>

                <button class="btn" onclick="dontShow()">
                    لا تظهر
                </button>
                <!-- <button class="btn" onclick="window.location.reload()">
                next
            </button> -->
            </div>
            <br>
            <div>
                <label for="afterSelect">Days</label>
                <select name="Days" id="afterSelect">
                    <!-- <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option> -->
                </select>
                <button class="btn" onclick="showAfter()">
                    show after
                </button>
            </div>
        </div>
        {{else}}
        <p>
            لا جديد موجود
        </p>
        <button class="btn" onclick="reset()">
            reset
        </button>
        {{end}}
    </center>
    <hr>
</div>

<script>
    const word = "{{.RD.Title}}";
    const afterSelect = document.getElementById("afterSelect");

    for (let i = 1; i < 31; i++) {
        const o = document.createElement("option");
        o.value = `${i}`;
        o.innerText = `${i}`;
        afterSelect.appendChild(o)
    }

    function showAfter(w) {
        const days = afterSelect.value;
        postThen(`${window.location.pathname}?w=${word}&after=${days}`,
            () => window.location.reload());
    }

    function dontShow() {
        postThen(`${window.location.pathname}?w=${word}&dontshow=true`,
            () => window.location.reload())
    }

    function postThen(url, func) {
        fetch(url, { method: "POST" })
            .then(((res) => {
                if (res.ok) { if (func) func(); }
            })).catch((err) => {
                console.error(err);
                alert("Something went wrong");
            });
    }
</script>