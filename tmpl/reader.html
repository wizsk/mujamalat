{{define "reader-css"}}
<style>
    /* from quran.com */
    .speia {
        --base: #f8ebd5;
        --text: #010101;
        --text-nf: #d20f39;
    }

    .latte {
        --base: #eff1f5;
        --text: #3a3c4e;
        --text-nf: #d20f39;
    }

    .mocha {
        --base: #1e1e2e;
        --text: #cdd6f4;
        --text-nf: #f38ba8;
    }

    #reader {
        max-width: 35em;
        text-align: justify;
        margin-left: auto;
        margin-right: auto;
        margin-top: 2rem;
        padding: 1rem 1rem;
        margin-bottom: 30vh;
    }

    .text-right {
        text-align: right !important;
    }

    .pera {
        text-indent: 6%;
        margin-bottom: 1.3rem;
    }

    .rWord {
        cursor: pointer;
        transition: background-color 100ms ease-in-out;
    }

    #popup {
        position: absolute;
        top: 0;
        left: 0;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 1rem;
    }

    .hi {
        background-color: var(--highlight);
        /* background-color: var(--accent-dark);
        color: var(--bg); */
    }

    .clicked {
        background-color: var(--highlight2);
    }

    .alert {
        background-color: var(--alert);
    }

    #highlight svg,
    #editAndHighlight svg {
        height: 1.4rem;
        width: 1.4rem;
    }

    /* reader menu style */
    #readerMenu {
        position: fixed;
        top: 0;
        left: 0;
        height: 100vh;
        width: 100vw;
        overflow-y: scroll;
        z-index: 1;
    }

    #readerMenu aside {
        background-color: var(--bg);
        margin: 4% auto;
        padding: 20px;
        border-radius: var(--border-radious);
        width: 80%;
        max-width: 400px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        /* margin-top: 6rem; */
    }

    #readerMenu h3 {
        margin: 0.5rem 0;
    }

    #readerMenu .sep {
        margin: 2rem 0;
    }

    #readerMenu button {
        display: block;
        margin-left: auto;
        margin-right: auto;
        margin-top: 3rem;
    }

    #readerMenu a {
        display: block;
        text-decoration: none;
        color: inherit;
        margin: 1rem 0;
    }

    #readerMenu .select-container {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        margin: 1rem 0;
    }

    #readerMenu select {
        font-family: inherit;
        font-size: inherit;
        padding: .1rem .5rem;
        border-radius: var(--border-radious);
        background-color: var(--bg);
        color: #000;
        border: 1px solid #ccc;
    }
    .poem-line-num {
        user-select: none;
        display: none;
    }

    #hide-line-numbers-div {
        display: none !important;
    }
</style>

<style id="poem">
    .pera:nth-of-type(2n+1) {
        text-indent: 0;
    }

    .pera:nth-of-type(2n) {
        text-indent: 3.5rem;
    }

    .poem-line-num {
        display: inline;
        font-weight: bold;
    }

    #hide-line-numbers-div {
        display: flex !important;
        user-select: none;
    }

    body:has(#hide-line-numbers:checked) .poem-line-num {
        display: none;
    }

    #text-align {
        pointer-events:none;
        opacity: 0.5;
    }

    #reader {
        text-align: right !important;
    }
</style>
<script>document.getElementById("poem").disabled = true;</script>
{{end}}

{{define "reader"}}
<div id="reader">
    {{range $i, $p := .Peras}}
    <div class="pera">
        {{if add $i 1 | isodd}}
        <span class="poem-line-num">{{qasidaLine $i}}- </span>
        {{end}}
        {{range $p}}
        <span data-oar="{{.Oar}}" class=" rWord {{if .IsHi}}hi{{end}}">{{.Og}}</span>
        {{end}}
    </div>
    {{end}}
</div>

<div class="hidden overlay-bg" id="readerMenu">
    <aside>
        <h3>خيارات</h3>
        <hr>

        <div class="select-container">
            <label for="font-selector">اختر الخط:</label>
            <select id="font-selector">
                <option value="font">كتاب</option>
                <option value="uthman">عثمان</option>
                <option value="amiri">أميري</option>
            </select>
        </div>

        <div class="select-container">
            <label for="vewing-mode">وضع المشاهدة:</label>
            <select id="vewing-mode">
                <option value="normal">عادي</option>
                <option value="poem">قصيدة</option>
            </select>
        </div>

        <div id="hide-line-numbers-div" class="select-container">
            <label for="hide-line-numbers">إخفاء أرقام الأبيات:</label>
            <input type="checkbox" id="hide-line-numbers">
        </div>

        <div class="select-container">
            <label for="text-align">محاذاة النص:</label>
            <select id="text-align">
                <option value="justify">التبرير</option>
                <option value="right">لليمين</option>
            </select>
        </div>

        <div class="select-container">
            <label for="wakelock">وضع القراءة المستمزة:</label>
            <select id="wakelock" disabled="disabled" value="off"
                style="color:var(--alert);appearance:none;-webkit-appearance:none;-moz-appearance:none;">
                <option value="off">مطفَأ</option>
                <option value="on">مشغَّل</option>
            </select>
        </div>


        <div class="sep"></div>
        <h3>روابط</h3>
        <hr>

        <a class="readerMenuAnker" href="/rd/">- انتقل إلى مدخل القارئ</a>
        <a class="readerMenuAnker" href="/"> - انتقل إلى القواميس</a>
        <a class="readerMenuAnker" href="/rd/highlist/">- اذهب إلى قائمة الكلمات المميزة</a>
        <button class="btn" style="width: 100%;" onclick="window.history.back()">اغلق</button>
    </aside>
</div>

<div id="popup" class="hidden">
    <button id="highlight" class="svg-btn">
        <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 16 16">
            <path d="M15.825.12a.5.5 0 0 1 .132.584c-1.53 3.43-4.743 8.17-7.095 10.64a6.1 6.1 0 0 1-2.373 1.534c-.018.227-.06.538-.16.868-.201.659-.667 1.479-1.708 1.74a8.1 8.1 0 0 1-3.078.132 4 4 0 0 1-.562-.135 1.4 1.4 0 0 1-.466-.247.7.7 0 0 1-.204-.288.62.62 0 0 1 .004-.443c.095-.245.316-.38.461-.452.394-.197.625-.453.867-.826.095-.144.184-.297.287-.472l.117-.198c.151-.255.326-.54.546-.848.528-.739 1.201-.925 1.746-.896q.19.012.348.048c.062-.172.142-.38.238-.608.261-.619.658-1.419 1.187-2.069 2.176-2.67 6.18-6.206 9.117-8.104a.5.5 0 0 1 .596.04"/>
        </svg>
    </button>
    <button id="openDictBtn" class="svg-btn">
        <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 16 16">
            <path
                d="M5.255 5.786a.237.237 0 0 0 .241.247h.825c.138 0 .248-.113.266-.25.09-.656.54-1.134 1.342-1.134.686 0 1.314.343 1.314 1.168 0 .635-.374.927-.965 1.371-.673.489-1.206 1.06-1.168 1.987l.003.217a.25.25 0 0 0 .25.246h.811a.25.25 0 0 0 .25-.25v-.105c0-.718.273-.927 1.01-1.486.609-.463 1.244-.977 1.244-2.056 0-1.511-1.276-2.241-2.673-2.241-1.267 0-2.655.59-2.75 2.286m1.557 5.763c0 .533.425.927 1.01.927.609 0 1.028-.394 1.028-.927 0-.552-.42-.94-1.029-.94-.584 0-1.009.388-1.009.94" />
        </svg>
    </button>
</div>

{{end}}
